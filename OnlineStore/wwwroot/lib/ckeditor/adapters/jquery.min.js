!function(c){if(void 0===c)throw Error("jQuery should be loaded before CKEditor jQuery adapter.");if("undefined"==typeof CKEDITOR)throw Error("CKEditor should be loaded before CKEditor jQuery adapter.");CKEDITOR.config.jqueryOverrideVal=void 0===CKEDITOR.config.jqueryOverrideVal||CKEDITOR.config.jqueryOverrideVal,c.extend(c.fn,{ckeditorGet:function(){var e=this.eq(0).data("ckeditorInstance");if(!e)throw"CKEditor is not initialized yet, use ckeditor() with a callback.";return e},ckeditor:function(d,r){if(!CKEDITOR.env.isCompatible)throw Error("The environment is incompatible.");var e;"function"!=typeof d&&(e=r,r=d,d=e);var n=[];r=r||{},this.each(function(){var o=c(this),t=o.data("ckeditorInstance"),e=o.data("_ckeditorInstanceLock"),i=this,a=new c.Deferred;n.push(a.promise()),t&&!e?(d&&d.apply(t,[this]),a.resolve()):e?t.once("instanceReady",function(){setTimeout(function e(){t.element?(t.element.$==i&&d&&d.apply(t,[i]),a.resolve()):setTimeout(e,100)},0)},null,null,9999):((r.autoUpdateElement||void 0===r.autoUpdateElement&&CKEDITOR.config.autoUpdateElement)&&(r.autoUpdateElementJquery=!0),r.autoUpdateElement=!1,o.data("_ckeditorInstanceLock",!0),t=c(this).is("textarea")?CKEDITOR.replace(i,r):CKEDITOR.inline(i,r),o.data("ckeditorInstance",t),t.on("instanceReady",function(r){var n=r.editor;setTimeout(function e(){var t;n.element?(r.removeListener(),n.on("dataReady",function(){o.trigger("dataReady.ckeditor",[n])}),n.on("setData",function(e){o.trigger("setData.ckeditor",[n,e.data])}),n.on("getData",function(e){o.trigger("getData.ckeditor",[n,e.data])},999),n.on("destroy",function(){o.trigger("destroy.ckeditor",[n])}),n.on("save",function(){return c(i.form).trigger("submit"),!1},null,null,20),n.config.autoUpdateElementJquery&&o.is("textarea")&&c(i.form).length&&(t=function(){o.ckeditor(function(){n.updateElement()})},c(i.form).on("submit",t),c(i.form).on("form-pre-serialize",t),o.on("destroy.ckeditor",function(){c(i.form).off("submit",t),c(i.form).off("form-pre-serialize",t)})),n.on("destroy",function(){o.removeData("ckeditorInstance")}),o.removeData("_ckeditorInstanceLock"),o.trigger("instanceReady.ckeditor",[n]),d&&d.apply(n,[i]),a.resolve()):setTimeout(e,100)},0)},null,null,9999))});var t=new c.Deferred;return this.promise=t.promise(),c.when.apply(this,n).then(function(){t.resolve()}),this.editor=this.eq(0).data("ckeditorInstance"),this}}),CKEDITOR.config.jqueryOverrideVal&&(c.fn.val=CKEDITOR.tools.override(c.fn.val,function(a){return function(n){if(arguments.length){var e=this,o=[],t=this.each(function(){var e=c(this),t=e.data("ckeditorInstance");if(e.is("textarea")&&t){var r=new c.Deferred;return t.setData(n,function(){r.resolve()}),o.push(r.promise()),!0}return a.call(e,n)});if(o.length){var r=new c.Deferred;return c.when.apply(this,o).done(function(){r.resolveWith(e)}),r.promise()}return t}var i=(t=c(this).eq(0)).data("ckeditorInstance");return t.is("textarea")&&i?i.getData():a.call(t)}}))}(window.jQuery);